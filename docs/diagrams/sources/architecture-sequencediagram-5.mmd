sequenceDiagram
    participant User
    participant Button as GenerateButton
    participant Query as React Query
    participant API as api.ts
    participant Backend as FastAPI
    participant PDF as PDFService
    participant MD as MarkdownService
    participant WP as WeasyPrint

    User->>Button: Click Generate PDF
    Button->>Query: mutate(request)
    Query->>API: generatePDF(request)
    API->>Backend: POST /generate-pdf
    Backend->>PDF: generate_pdf(request)
    PDF->>MD: convert_to_html(markdown, css)
    MD-->>PDF: HTML string
    PDF->>WP: HTML.write_pdf()
    WP-->>PDF: PDF bytes
    PDF-->>Backend: PDF bytes
    Backend-->>API: StreamingResponse
    API-->>Query: Blob
    Query->>Button: onSuccess(blob)
    Button->>User: Download PDF file